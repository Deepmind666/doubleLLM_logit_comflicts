# 工程实施详细计划（v2）

该计划用于将 `gptdeepsearch2_9.md` 新增工程方案与专利文档主线强绑定，确保“可开发”与“可授权支撑”同步推进。

## 1. 双轨原则

- 轨道A：专利交付轨（权利要求、说明书、实施例、附图、格式检查）  
- 轨道B：工程实现轨（模块开发、数据库、测试、部署）

约束：轨道B任何新增能力必须回填轨道A中的术语定义、实施例和权利要求支撑点。

## 2. 模块与专利步骤映射

| 工程模块 | 对应步骤 | 关键输入 | 关键输出 | 专利支撑点 |
|---|---|---|---|---|
| model_invoker | S1 | Q, Prompt模板 | OA, OB | 双模型同题生成 |
| divergence_detector | S2-S4 | OA, OB | PA, PB, M, D | 论点单元切分+分歧识别 |
| decoupler | S5 | D, PA, PB | q_d, rA_d, rB_d | 结构化解耦 |
| evidence_retriever | S6 | q_d | E_d, verdict | 证据计划+裁决 |
| fusion_generator | S7 | D, J_d | F, provenance | 融合模板输出 |
| scheduler/controller | S8 | D_t, budget | stop/continue | 收敛与预算调度 |
| db/audit | 全流程 | 过程事件 | 审计日志 | 可追溯与合规 |

## 3. 量化验收指标

## 阶段1（最简原型）
- 成功率：双模型调用成功率 >= 95%  
- 缓存命中：重复问题命中率 >= 80%  
- 输出完整性：能输出分歧摘要与融合答案

## 阶段2（证据裁决）
- 关键分歧证据覆盖率 >= 70%  
- 裁决可解释率（含来源字段）= 100%  
- 误裁决率（抽样）<= 20%

## 阶段3（图谱增强）
- 图谱提取可用率 >= 85%（对样例集）  
- 图谱对齐后新增有效要点比例 >= 10%  
- 复杂问题融合的人工可读性评分提升

## 4. 风险与回滚策略

1. API超时/限流：指数退避 + 降级到单模型 + 标记待验证。  
2. 证据缺失：不强行裁决，写入多解保留。  
3. 图谱误抽取：可配置关闭图谱分支，回退到文本分歧主链。  
4. 外部源异常：优先内部知识库，外部源仅作补充。  
5. 质量退化：保留前一稳定版本，启用回滚开关。

## 5. 立即执行清单

1. 补充证据源分级策略文档并纳入裁决规则。  
2. 定义数据库结构化字段最小集（unit/match/divergence/judgment）。  
3. 增加失败注入测试模板。  
4. 将该计划条目同步到进展日志并与提交清单联动。


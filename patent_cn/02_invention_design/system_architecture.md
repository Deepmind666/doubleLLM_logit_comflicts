# 系统架构说明（M2）

## 1. 模块划分（对应附图图1）

- `101` 获取与标准化模块  
接收输入问题 `Q`，执行提示模板标准化、参数归一化、上下文裁剪。

- `102A` 模型A推理模块  
生成输出 `OA` 与可选结构化解释 `TA`。

- `102B` 模型B推理模块  
生成输出 `OB` 与可选结构化解释 `TB`。

- `103` 解析切分模块  
将 `OA/OB` 切分为论点单元集合 `PA/PB`，补充主题标签、段落号、证据引用位。

- `104` 对齐匹配模块  
执行 embedding 相似度计算、规则约束匹配、编号位置约束，得到匹配矩阵 `M`。

- `105` 分歧识别模块  
对匹配对执行蕴含/矛盾/无关/缺失判定，输出分歧点集合 `D` 与类型标签。

- `106` 结构化解耦模块  
为每个分歧点生成子问题 `q_d`，并抽取双方依据片段 `rA_d/rB_d`。

- `107` 证据与裁决模块（可选）  
基于证据计划检索外部证据 `E_d`，生成裁决记录 `J_d`（支持A/支持B/保留多解）。

- `108` 融合输出模块  
按固定模板输出 `F`，包含共识区、分歧区、裁决区、待验证区及 provenance。

- `109` 存储审计与合规模块  
记录过程日志、证据来源、版本号与合规检查结论。

- `110` 预算调度与迭代控制模块  
按分歧规模和资源预算调度执行，触发或停止迭代闭环。

## 2. 数据流主路径

1. `Q -> 101 -> 102A/102B -> OA/OB`  
2. `OA/OB -> 103 -> PA/PB`  
3. `PA/PB -> 104 -> M`  
4. `M -> 105 -> D`  
5. `D -> 106 -> {q_d, rA_d, rB_d}`  
6. `q_d -> 107 -> {E_d, J_d}`（可选）  
7. `{PA,PB,D,J_d} -> 108 -> F`  
8. 全链路结果 -> `109`；迭代判断由 `110` 控制。

## 3. 与权利要求模块映射建议

- 方法独立权利要求：覆盖 `101~108` 的处理步骤。  
- 装置独立权利要求：覆盖 `101~110` 的功能模块。  
- 设备与介质独立权利要求：覆盖执行上述步骤的处理器与指令集合。

## 4. 实施边界

- 可在同机双模型或分布式双模型下部署。  
- 证据检索模块可关闭，关闭后保留“多解输出”模式。  
- 预算调度模块可按 CPU-only、GPU-only、混合模式配置。

